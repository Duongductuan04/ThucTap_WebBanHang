@using SimpleTaskApp.MobilePhones.Dto
@using SimpleTaskApp.Areas.Admin.Models.Common.Modals
@model OrderDto

@{
    Layout = null;
}

@await Html.PartialAsync(
                "~/Areas/Admin/Views/Shared/Modals/_ModalHeader.cshtml",
                new ModalHeaderViewModel(L("OrderDetail"))
            )

<div class="modal-body">
    <div class="row">
        <!-- Thông tin đơn hàng -->
        <div class="col-md-12">
            <div class="card shadow-sm border-0">
                <div class="card-body">
                    <div class="row mb-2">
                        <div class="col-sm-4 text-muted">@L("RecipientName")</div>
                        <div class="col-sm-8 font-weight-bold">@Model.RecipientName</div>
                    </div>
                    <div class="row mb-2">
                        <div class="col-sm-4 text-muted">@L("RecipientPhone")</div>
                        <div class="col-sm-8 font-weight-bold">@Model.RecipientPhone</div>
                    </div>
                    <div class="row mb-2">
                        <div class="col-sm-4 text-muted">@L("RecipientAddress")</div>
                        <div class="col-sm-8 font-weight-bold">@Model.RecipientAddress</div>
                    </div>
                    <div class="row mb-2">
                        <div class="col-sm-4 text-muted">@L("Note")</div>
                        <div class="col-sm-8 font-weight-bold">
                            @(!string.IsNullOrEmpty(Model.Note) ? Model.Note : "-")
                        </div>
                    </div>

                    <div class="row mb-2">
                        <div class="col-sm-4 text-muted">@L("Status")</div>
                        <div class="col-sm-8 font-weight-bold">
                            @{
                                var statusText = Model.Status switch
                                {
                                    0 => L("Pending"),
                                    1 => L("Shipping"),
                                    2 => L("Completed"),
                                    3 => L("Cancelled"),
                                    _ => "-"
                                };
                            }
                            @statusText
                        </div>
                    </div>
                    <div class="row mb-2">
                        <div class="col-sm-4 text-muted">@L("PaymentMethod")</div>
                        <div class="col-sm-8 font-weight-bold">
                            @{
                                var paymentText = Model.PaymentMethod switch
                                {
                                    0 => L("Cash"),
                                    1 => L("EWallet"),
                                    _ => "-"
                                };
                            }
                            @paymentText
                        </div>
                    </div>
                    <div class="row mb-2">
                        <div class="col-sm-4 text-muted">@L("ShippingMethod")</div>
                        <div class="col-sm-8 font-weight-bold">
                            @{
                                var shippingText = Model.ShippingMethod switch
                                {
                                    0 => L("Standard"),
                                    1 => L("Express"),
                                    2 => L("SuperFast"),
                                    _ => "-"
                                };
                            }
                            @shippingText
                        </div>
                    </div>

                    <!-- Tổng tiền sản phẩm -->
                    <div class="row mb-2">
                        <div class="col-sm-4 text-muted">@L("TotalAmount")</div>
                        <div class="col-sm-8 font-weight-bold">
                            @Model.TotalAmount.ToString("N0", new System.Globalization.CultureInfo("vi-VN")) đ
                        </div>
                    </div>

                    <!-- Phí vận chuyển -->
                    <div class="row mb-2">
                        <div class="col-sm-4 text-muted">@L("ShippingFee")</div>
                        <div class="col-sm-8 font-weight-bold">
                            @Model.ShippingFee.ToString("N0", new System.Globalization.CultureInfo("vi-VN")) đ
                        </div>
                    </div>

                    <hr />

                    <!-- Tổng thanh toán cuối cùng -->
                    <div class="row mb-2">
                        <div class="col-sm-4 text-muted">@L("FinalAmount")</div>
                        <div class="col-sm-8 font-weight-bold text-danger fs-5">
                            @Model.FinalAmount.ToString("N0", new System.Globalization.CultureInfo("vi-VN")) đ
                        </div>
                    </div>

                    <!-- Nếu muốn hiển thị danh sách sản phẩm trong đơn hàng -->
                    @if (Model.OrderDetails != null && Model.OrderDetails.Any())
                    {
                        <hr />
                        <h6>@L("Products")</h6>
                        <table class="table table-sm table-bordered">
                            <thead>
                                <tr>
                                    <th>@L("Name")</th>
                                    <th>@L("Quantity")</th>
                                    <th>@L("Price")</th>
                                    <th>@L("Total")</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model.OrderDetails)
                                {
                                    <tr>
                                        <td>@item.MobilePhoneName</td>
                                        <td>@item.Quantity</td>
                                        <td>@item.UnitPrice.ToString("N0", new System.Globalization.CultureInfo("vi-VN")) đ</td>
                                        <td>@item.ItemTotal.ToString("N0", new System.Globalization.CultureInfo("vi-VN")) đ</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    }
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal-footer border-0">
    <button type="button" class="btn btn-secondary" data-dismiss="modal">
        <i class="fa fa-times"></i> @L("Close")
    </button>
</div>
